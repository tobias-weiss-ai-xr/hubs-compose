{{ $id := delimit (shuffle (seq 1 9)) "" }}
{{ $path := .Get "path" | default "img" }}
{{ $files := readDir (print "static/" $path) }}

<!-- Slider main container -->
<div id="swiper-{{ $id }}" class="swiper" style="width: 100%; height: auto; max-width: 800px; margin: 20px auto;">
  <div class="swiper-wrapper">
    {{ range $files }}
      {{ if (findRE "\\.(jpg|jpeg|png|gif|webp)$" .Name) }}
        <div class="swiper-slide">
          <img src="{{ relURL (print $path "/" .Name) }}" alt="{{ .Name }}" style="width: 100%; height: 500px; object-fit: cover; border-radius: 8px;">
        </div>
      {{ end }}
    {{ end }}
  </div>
  <div class="swiper-pagination"></div>
  <div class="swiper-button-prev"></div>
  <div class="swiper-button-next"></div>
</div>

<script>
  (function() {
    const initSwiper = function() {
      new Swiper('#swiper-{{ $id }}', {
        loop: true,
        pagination: {
          el: '#swiper-{{ $id }} .swiper-pagination',
          clickable: true,
        },
        navigation: {
          nextEl: '#swiper-{{ $id }} .swiper-button-next',
          prevEl: '#swiper-{{ $id }} .swiper-button-prev',
        },
        autoplay: {
          delay: 3000,
          disableOnInteraction: false,
        },
      });
    };

    if (document.readyState === 'complete' || document.readyState === 'interactive') {
      initSwiper();
    } else {
      document.addEventListener('DOMContentLoaded', initSwiper);
    }
  })();
</script>